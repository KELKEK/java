<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script>
/*
	var arr = [10, 20, 30]; //{0:10, 1:20, 2:30}
	console.log(arr[0]);

	//키가 숫자도 가능하고 문자도 가능(""여부 상관없음, 단 띄어쓰기할 때는 ""필요)
	var obj = {1:"홍길동", 2:20, "전공":"컴공", 과목:"JavaScript", "자기 소개":"야호", go:function(){alert("go함수");}};
	console.log(obj["1"]);
	console.log(obj["2"]);
	console.log(obj["전공"]);
	console.log(obj.전공);
	console.log(obj["과목"]);
	console.log(obj.과목);
	console.log(obj["자기 소개"]);
	console.log(obj.go);
	obj.go();
	
	
	for(let pro in obj){
		console.log(obj[pro]);
	}
	*/
	

</script>
</head>
<body>
<button>Object의 속성 동적추가</button>
<button>Object배열</button>
<button>복사</button>
<button>생성자함수</button>
<button>기본타입/참조타입</button>
<button>forEach/map</button>
<button>Json</button>
<!-- 예외 : 프로그래머의 노력으로 복구가 가능 -->
<button>Exception처리</button>
<button>Class</button>
<div id="here">여기</div>
<script src="https://cdn.jsdelivr.net/npm/underscore@1.13.6/underscore-umd-min.js"></script>
<script>
	document.querySelector("button:nth-child(1)").addEventListener("click", f1);
	document.querySelector("button:nth-child(2)").addEventListener("click", f2);
	document.querySelector("button:nth-child(3)").addEventListener("click", f3);
	document.querySelector("button:nth-child(4)").addEventListener("click", f4);
	document.querySelector("button:nth-child(5)").addEventListener("click", f5);
	document.querySelector("button:nth-child(6)").addEventListener("click", f6);
	document.querySelector("button:nth-child(7)").addEventListener("click", f7);
	document.querySelector("button:nth-child(8)").addEventListener("click", f8);
	document.querySelector("button:nth-child(9)").addEventListener("click", f9);
	
	
	function f1(){
		var obj = {name:"홍길동"};
		obj.age = 20;
		obj.major = "컴공";
		obj.myInfo = function(){here.innerHTML = this.name+ " : " + this.age+ " : " + this.major;};
		obj.myInfo();
	}
	
	function f2(){
		var students = [];
		students.push({name:"홍길동1", java:100, sql : 90, js:80});
		students.push({name:"홍길동4", java:100, sql : 94, js:70});
		students.push({name:"홍길동3", java:100, sql : 93, js:80});
		students.push({name:"홍길동5", java:100, sql : 91, js:60});
		students.push({name:"홍길동2", java:100, sql : 92, js:60});
		students = _.sortBy(students, "name");
		
		for(let index in students){
			students[index].getSum = function(){
				return this.java + this.sql + this.js;
			};
			students[index].getAvg = function(){
				return this.getSum()/3;
			};
			console.log(students[index].name, students[index].getSum(),students[index].getAvg());
		}
	}
	
	function f3(){
		var score = 100;
		var score2 = score;//값의 복사
		score = 200;//이때도 과연 둘이 같나?
		console.log(score, score2);
		
		var arr = [10, 20, 30];
		var arr2 = arr //주소복사//복제 안됨
		var arr3 = _.clone(arr);//underscore.js로 복제
		var arr4 = [...arr]; //전개연산자로 복제
		arr[0] = 99;
		console.log(arr);//99,20,30
		console.log(arr2);//0번쨰 구간에 두 배열 모두 값이 변함(참조를 복사한 것이기 때문)
		console.log(arr3);//10,20,30
		console.log(arr4);//10,20,30
		
		var obj = {name:"홍길동1", java:100, sql:90, js:80};
		var obj2 = obj;
		var obj3 = _.clone(obj);
		var obj4 = {...obj};
		obj.java = 99;
		
		console.log(obj);
		console.log(obj2);
		console.log(obj3);
		console.log(obj4);
		
		var scores = [10, 4, 9, 23, 20, 11, 84, 22, 17];
		//scores.sort();//문자열로 인식해서 sort된다.
		//scores.sort(function(a,b){return a - b;});//오름차순, 내림차순은 b - a
		//scores.sort((a, b)=>a-b);
		//scores = _.sortBy(scores);//sortBy에 scores가 return값으로 주어짐
		//scores = _.sortBy(scores, (a,b) => b-a);// <- a값, b인덱스가 되어 정렬이 안됨
		scores = _.sortBy(scores).reverse();//내림차순
		console.log(scores);
	}
	
	//JavaScript의 최상위객체는 Object이다.
	//Object에는 toString()메서드 제공된다. 객체출력하면 [Object Object]
	function f4(){
		var students = [];
		students.push(new Student("홍길동1", 100, 90, 80));
		students.push(new Student("홍길동4", 92, 90, 80));
		students.push(new Student("홍길동2", 88, 90, 80));
		students.push(new Student("홍길동3", 80, 80, 80));
		students.push(new Student("홍길동5", 95, 90, 100));
		
		//프로토타입 : 생성자함수를 이용해서 만든 객체들이 공유하는 공간
		Student.prototype.getSum = function(){return this.java + this.sql + this.js;};
		Student.prototype.getAvg = function(){return this.getSum() / 3;};
		Student.prototype.toString = function(){return "이름은 " + this.name + "평균은 " + this.getAvg()};
		
		for(let index in students){
			here.innerHTML += "<br>" + students[index];
		}
		
		var obj = Student("홍길동6", 90, 99, 96);
		//호출했을 뿐 return한 것이 아니므로 출력 불가
		//console.log(obj.getSum());
		
	}
	function Student(name, java, sql, js){
		this.name = name;
		this.java = java;
		this.sql = sql;
		this.js = js;
	}
	
	function f5(){
		var a = 10; //기본형(= int a = 10)
		var b = new Number(20); //생성자함수 호출(내장객체)(= Integer b = new Integer(20))
		
		console.log(a.toString(2));//2진수
		console.log(b.toString(2));//2진수
		
// 		a.f1 = function(){return 100;};
// 		console.log(a.f1());
//기본형은 속성추가 불가, 객체형은 속성추가 가능
		b.f1 = function(){return 100;};
		console.log(b.f1());
		
		var s = "자바스크립트";
		console.log(s.indexOf("스"));//몇 번쨰 인덱스의 문자인지를 반환하는 함수
	}
	
	
	function f6(){
		var arr = ["월요일", "화요일", "수요일", "토요일"];
		arr.sort();
		arr.forEach(function(data, seq, obj){
			console.log(seq + "번째 => " + data);
		});
		
		var arr2 = arr.map(function(data){return data.charAt(0);})
		console.log(arr2);
		
		//filter는 조건에 맞으면(true)이면 리턴됨
		var arr = [1, 2, 3, 4, 5];
		var arr2 = arr.filter(function(data){return data%2==0;})
		console.log(arr2);
	}
	
	function f7(){
		//JS -> JAVA
		//   문자  <= JSON.stringify
		//   <-   
		//   JSON문자 <= JSON.parse
		//JSON(Javascript Objet Notation) : 자바스크립트 오브젝트형태의 분자열
		var student = {name:"홍길동10", java:100, sql:90, js:80};
		//JavaScript Object(자바스크립트 객체) => JSON의 문자열로 바꾸기
		var str = JSON.stringify(student); //{"name":"홍길동10","java":100,"sql":90,"js":80}
		console.log(student, typeof(student));
		console.log(str, typeof(str));//JSON문자열
		
		//console.log(str.java) : undefined
		var student2 = JSON.parse(str);//JS객체가 되며 문자열 안에 있는 속성을 얻을 수 있게 됨
		console.log(student2.java);
		
	}
	
	function f8(){
		try{
			var arr = new Array(99999999999999999999999999999999999999);

		}catch(ex){
			console.dir(ex);
		}
		
		console.log("success");
	}
	
	function f9(){
		var s1 = new Student2("은점", 100, 90, 80);
		
		console.log(s1);
		console.log(s1.toString());
	}
	
	class Student2 extends Object{
		constructor(name, java, sql, js){
			this.name = name;
			this.java = java;
			this.sql = sql;
			this.js = js;
		}
		//다른 함수들과 달리 class 내의 함수는 앞에 function예약어를 사용하지 않는다.
		getSum(){
			return this.java+this.sql+this.js;
		}
		getAverage(){
			return this.getSum()/3;
		}
		toString(){
			return "이름은 " + this.name + ", 평균은 " + this.getAverage();
		}
	}
</script>
</body>
</html>